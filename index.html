index.html
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>1v1 Trading Simulator</title>

<!-- Chart.js + Financial Plugin (for candlesticks) -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial"></script>

<style>
body {
  font-family: Arial, sans-serif;
  background: #111;
  color: white;
  margin: 0;
  padding: 10px;
}
.container {
  display: flex;
  flex-direction: row;
  gap: 20px;
}
.player-box {
  border: 1px solid #444;
  padding: 10px;
  width: 250px;
  background: #222;
}
button {
  width: 100%;
  margin-top: 5px;
  padding: 10px;
  background: #0a84ff;
  color: white;
  border: none;
  cursor: pointer;
}
button:hover {
  background: #006be6;
}
#chart-container {
  width: 100%;
  height: 400px;
}
</style>
</head>

<body>

<h2>ðŸ”¥ 1v1 Trading Simulator</h2>
<p>Market updates every second. Buy low, sell high! Player with the most money after the timer wins.</p>

<div class="container">

  <div style="flex: 1;">
    <canvas id="chart"></canvas>
  </div>

  <div style="width: 300px;">
    <div class="player-box">
      <h3>Player 1</h3>
      Balance: $<span id="p1bal">10000</span><br>
      Position: <span id="p1pos">0</span> shares
      <button onclick="buy(1)">BUY</button>
      <button onclick="sell(1)">SELL</button>
    </div>

    <div class="player-box" style="margin-top: 20px;">
      <h3>Player 2</h3>
      Balance: $<span id="p2bal">10000</span><br>
      Position: <span id="p2pos">0</span> shares
      <button onclick="buy(2)">BUY</button>
      <button onclick="sell(2)">SELL</button>
    </div>

    <div class="player-box" style="margin-top: 20px;">
      <h3>Game Control</h3>
      Time left: <span id="time">60</span>s<br>
      <button onclick="startGame()">Start Game</button>
    </div>
  </div>

</div>

<script>
let price = 100;
let candles = [];
let timer = 60;
let interval;

let players = {
  1: { balance: 10000, pos: 0 },
  2: { balance: 10000, pos: 0 }
};

function updateUI() {
  document.getElementById("p1bal").innerText = players[1].balance.toFixed(2);
  document.getElementById("p2bal").innerText = players[2].balance.toFixed(2);
  document.getElementById("p1pos").innerText = players[1].pos;
  document.getElementById("p2pos").innerText = players[2].pos;
}

// --- BUY / SELL ---
function buy(p) {
  if (players[p].balance >= price) {
    players[p].balance -= price;
    players[p].pos += 1;
    updateUI();
  }
}
function sell(p) {
  if (players[p].pos > 0) {
    players[p].balance += price;
    players[p].pos -= 1;
    updateUI();
  }
}

// --- Generate random candlestick tick ---
function generateTick() {
  let open = price;
  let change = (Math.random() - 0.5) * 4;
  price = Math.max(1, price + change);
  let close = price;
  let high = Math.max(open, close) + Math.random() * 1.5;
  let low = Math.min(open, close) - Math.random() * 1.5;

  candles.push({ o: open, h: high, l: low, c: close });

  if (candles.length > 50) candles.shift();

  chart.update();
}

// --- Timer + Winner ---
function endGame() {
  clearInterval(interval);
  let p1 = players[1].balance + players[1].pos * price;
  let p2 = players[2].balance + players[2].pos * price;

  let msg = "";
  if (p1 > p2) msg = "Player 1 Wins! ðŸŽ‰";
  else if (p2 > p1) msg = "Player 2 Wins! ðŸ†";
  else msg = "It's a Tie!";

  alert(msg + `\n\nFinal Values:\nP1: $${p1.toFixed(2)}\nP2: $${p2.toFixed(2)}`);
}

function startGame() {
  timer = 60;
  candles = [];
  price = 100;

  players = {
    1: { balance: 10000, pos: 0 },
    2: { balance: 10000, pos: 0 }
  };
  updateUI();

  document.getElementById("time").innerText = timer;

  clearInterval(interval);
  interval = setInterval(() => {
    generateTick();
    timer--;
    document.getElementById("time").innerText = timer;
    if (timer <= 0) endGame();
  }, 1000);
}

// --- Chart ---
const ctx = document.getElementById("chart");
const chart = new Chart(ctx, {
  type: 'candlestick',
  data: { datasets: [{ label: "Market", data: candles }] },
  options: {
    responsive: true,
    scales: {
      x: { ticks: { color: "white" } },
      y: { ticks: { color: "white" } }
    }
  }
});
</script>

</body>
</html>
