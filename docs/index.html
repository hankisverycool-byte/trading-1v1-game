docs/index.html
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>1v1 Trading Simulator</title>

<!-- TradingView Lightweight Charts -->
<script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>

<style>
body {
  font-family: Arial, sans-serif;
  background: #111;
  color: white;
  margin: 0;
  padding: 10px;
}
.container {
  display: flex;
  flex-direction: row;
  gap: 20px;
}
.player-box {
  border: 1px solid #444;
  padding: 10px;
  width: 250px;
  background: #222;
}
button {
  width: 100%;
  margin-top: 5px;
  padding: 10px;
  background: #0a84ff;
  color: white;
  border: none;
  cursor: pointer;
}
button:hover {
  background: #006be6;
}
#tv_chart {
  width: 600px;
  height: 400px;
}
</style>
</head>

<body>

<h2>ðŸ”¥ 1v1 Trading Simulator</h2>
<p>Market updates every second. Buy low, sell high! Player with the most money after the timer wins.</p>

<div class="container">

  <div>
    <div id="tv_chart"></div>
  </div>

  <div style="width: 300px;">
    <div class="player-box">
      <h3>Player 1</h3>
      Balance: $<span id="p1bal">10000</span><br>
      Position: <span id="p1pos">0</span> shares
      <button onclick="buy(1)">BUY</button>
      <button onclick="sell(1)">SELL</button>
    </div>

    <div class="player-box" style="margin-top: 20px;">
      <h3>Player 2</h3>
      Balance: $<span id="p2bal">10000</span><br>
      Position: <span id="p2pos">0</span> shares
      <button onclick="buy(2)">BUY</button>
      <button onclick="sell(2)">SELL</button>
    </div>

    <div class="player-box" style="margin-top: 20px;">
      <h3>Game Control</h3>
      Time left: <span id="time">60</span>s<br>
      <button onclick="startGame()">Start Game</button>
    </div>
  </div>

</div>

<script>
// --- Player Data ---
let players = {
  1: { balance: 10000, pos: 0 },
  2: { balance: 10000, pos: 0 }
};

function updateUI() {
  document.getElementById("p1bal").innerText = players[1].balance.toFixed(2);
  document.getElementById("p2bal").innerText = players[2].balance.toFixed(2);
  document.getElementById("p1pos").innerText = players[1].pos;
  document.getElementById("p2pos").innerText = players[2].pos;
}

// --- Buy/Sell Functions ---
function buy(p) {
  if (players[p].balance >= price) {
    players[p].balance -= price;
    players[p].pos += 1;
    updateUI();
  }
}
function sell(p) {
  if (players[p].pos > 0) {
    players[p].balance += price;
    players[p].pos -= 1;
    updateUI();
  }
}

// --- Timer & Game ---
let timer = 60;
let interval;
let price = 100;

// --- TradingView Chart Setup ---
const chart = LightweightCharts.createChart(document.getElementById('tv_chart'), {
    width: 600,
    height: 400,
    layout: { backgroundColor: '#111', textColor: '#fff' },
    grid: { vertLines: { color: '#333' }, horzLines: { color: '#333' } },
    rightPriceScale: { borderColor: '#555' },
    timeScale: { borderColor: '#555', timeVisible: true, secondsVisible: false }
});

const candleSeries = chart.addCandlestickSeries();

let data = [
    { time: Math.floor(Date.now()/1000) - 3, open: 100, high: 105, low: 95, close: 102 },
    { time: Math.floor(Date.now()/1000) - 2, open: 102, high: 108, low: 101, close: 107 },
    { time: Math.floor(Date.now()/1000) - 1, open: 107, high: 110, low: 105, close: 106 },
];

candleSeries.setData(data);

// --- Simulate Market Tick ---
function generateTick() {
    const last = data[data.length - 1];
    const change = (Math.random() - 0.5) * 4;
    const newClose = Math.max(1, last.close + change);
    const newData = {
        time: Math.floor(Date.now()/1000),
        open: last.close,
        high: Math.max(last.close, newClose) + Math.random()*2,
        low: Math.min(last.close, newClose) - Math.random()*2,
        close: newClose
    };
    price = newClose;
    data.push(newData);
    if(data.length > 50) data.shift();
    candleSeries.setData(data);
}

// --- Start / Reset Game ---
function endGame() {
    clearInterval(interval);
    const p1Value = players[1].balance + players[1].pos * price;
    const p2Value = players[2].balance + players[2].pos * price;

    let msg = "";
    if(p1Value > p2Value) msg = "Player 1 Wins! ðŸŽ‰";
    else if(p2Value > p1Value) msg = "Player 2 Wins! ðŸ†";
    else msg = "It's a Tie!";

    alert(msg + `\n\nFinal Values:\nP1: $${p1Value.toFixed(2)}\nP2: $${p2Value.toFixed(2)}`);
}

function startGame() {
    timer = 60;
    price = 100;
    players = {1: {balance:10000,pos:0}, 2:{balance:10000,pos:0}};
    updateUI();
    document.getElementById("time").innerText = timer;

    data = [
        { time: Math.floor(Date.now()/1000) - 3, open: 100, high: 105, low: 95, close: 102 },
        { time: Math.floor(Date.now()/1000) - 2, open: 102, high: 108, low: 101, close: 107 },
        { time: Math.floor(Date.now()/1000) - 1, open: 107, high: 110, low: 105, close: 106 },
    ];
    candleSeries.setData(data);

    clearInterval(interval);
    interval = setInterval(() => {
        generateTick();
        timer--;
        document.getElementById("time").innerText = timer;
        if(timer <= 0) endGame();
    }, 1000);
}
</script>

</body>
</html>

